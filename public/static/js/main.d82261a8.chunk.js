(this["webpackJsonpreact-places"]=this["webpackJsonpreact-places"]||[]).push([[0],Array(21).concat([function(e,t,n){},,,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,a=n(1),r=n.n(a),s=n(11),i=n.n(s),l=(n(30),n(3)),o=n(8),u=n(5),d=n.n(u),j=n(9),b=n(2),p=(n(32),n(0)),O=function(e){return Object(p.jsx)("div",{className:"avatar ".concat(e.className),style:e.style,children:Object(p.jsx)("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}})})},h=(n(34),function(e){return Object(p.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),x=(n(35),function(e){return Object(p.jsx)("li",{className:"user-item",children:Object(p.jsx)(h,{className:"user-item__content",children:Object(p.jsxs)(o.b,{to:"/".concat(e.id,"/places"),children:[" ",Object(p.jsx)("div",{className:"user-item__image",children:Object(p.jsx)(O,{image:"".concat("https://mernplaces.stevenabaco.dev/").concat(e.image),alt:e.name})}),Object(p.jsxs)("div",{className:"user-item__info",children:[Object(p.jsx)("h2",{children:e.name}),Object(p.jsxs)("h3",{children:[e.placeCount,1===e.placeCount?"Place":" Places"]})]})]})})})}),m=(n(44),function(e){return 0===e.items.length?Object(p.jsx)("div",{className:"center",children:Object(p.jsx)(h,{children:Object(p.jsx)("h2",{children:"No users found !"})})}):Object(p.jsx)("ul",{className:"users-list",children:e.items.map((function(e){return Object(p.jsx)(x,{id:e.id,image:e.image,name:e.name,placeCount:e.places.length},e.id)}))})}),v=n(7),f=n(60),g=(n(45),function(e){return i.a.createPortal(Object(p.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),C=(n(46),function(e){var t=Object(p.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(p.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(p.jsx)("h2",{children:e.header})}),Object(p.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(p.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(p.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return i.a.createPortal(t,document.getElementById("modal-hook"))}),N=function(e){return Object(p.jsxs)(p.Fragment,{children:[e.show&&Object(p.jsx)(g,{onClick:e.onCancel}),Object(p.jsx)(f.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(p.jsx)(C,Object(v.a)({},e))})]})},y=(n(47),function(e){return e.href?Object(p.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(p.jsx)(o.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(p.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),I=function(e){return Object(p.jsx)(N,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(p.jsx)(y,{onClick:e.onClear,children:"Okay"}),children:Object(p.jsx)("p",{children:e.error})})},w=(n(48),function(e){return Object(p.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(p.jsx)("div",{className:"lds-dual-ring"})})}),k=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(b.a)(r,2),i=s[0],l=s[1],o=Object(a.useRef)([]),u=Object(a.useCallback)(function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,r,s,i,u,j=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:"GET",a=j.length>2&&void 0!==j[2]?j[2]:null,r=j.length>3&&void 0!==j[3]?j[3]:{},c(!0),s=new AbortController,o.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:a,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(u=e.sent,o.current=o.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(u.message);case 16:return c(!1),e.abrupt("return",u);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),c(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:u,clearError:function(){l(null)}}},E=function(){var e=k(),t=e.isLoading,n=e.error,c=e.sendRequest,r=e.clearError,s=Object(a.useState)(),i=Object(b.a)(s,2),l=i[0],o=i[1];return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("".concat("https://mernplaces.stevenabaco.dev/api","/users"));case 3:t=e.sent,o(t.users),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[c]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{error:n,onClear:r}),t&&Object(p.jsx)("div",{className:"center",children:Object(p.jsx)(w,{})}),!t&&l&&Object(p.jsx)(m,{items:l})]})},T=n(23),S="REQUIRE",_="MINLENGTH",P="MAXLENGTH",V="EMAIL",D=function(){return{type:S}},L=function(e){return{type:_,val:e}},A=function(e,t){var n,c=!0,a=Object(T.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.type===S&&(c=c&&e.trim().length>0),r.type===_&&(c=c&&e.trim().length>=r.val),r.type===P&&(c=c&&e.trim().length<=r.val),"MIN"===r.type&&(c=c&&+e>=r.val),"MAX"===r.type&&(c=c&&+e<=r.val),r.type===V&&(c=c&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){a.e(s)}finally{a.f()}return c},R=(n(49),function(e,t){switch(t.type){case"CHANGE":return Object(v.a)(Object(v.a)({},e),{},{value:t.val,isValid:A(t.val,t.validators)});case"TOUCH":return Object(v.a)(Object(v.a)({},e),{},{isTouched:!0});default:return e}}),F=function(e){var t=Object(a.useReducer)(R,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),n=Object(b.a)(t,2),c=n[0],r=n[1],s=e.id,i=e.onInput,l=c.value,o=c.isValid;Object(a.useEffect)((function(){i(s,l,o)}),[s,l,o,i]);var u=function(t){r({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(){r({type:"TOUCH"})},j="input"===e.element?Object(p.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:d,value:c.value}):Object(p.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:d,value:c.value});return Object(p.jsxs)("div",{className:"form-control ".concat(!c.isValid&&c.isTouched&&"form-control--invalid"),children:[Object(p.jsx)("label",{htmlFor:e.id,children:e.label}),j,!c.isValid&&c.isTouched&&Object(p.jsx)("p",{children:e.errorText})]})},G=(n(50),function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(b.a)(s,2),l=i[0],o=i[1],u=Object(a.useState)(!1),d=Object(b.a)(u,2),j=d[0],O=d[1],h=Object(a.useRef)();Object(a.useEffect)((function(){if(c){var e=new FileReader;e.onload=function(){o(e.result)},e.readAsDataURL(c)}}),[c]);return Object(p.jsxs)("div",{className:"form-control",children:[Object(p.jsx)("input",{id:e.id,ref:h,style:{display:"none"},type:"file",accept:".jpg, .png, .jpg",onChange:function(t){var n,c=j;t.target.files&&1===t.target.files.length?(n=t.target.files[0],r(n),O(!0),c=!0):(O(!1),c=!1),e.onInput(e.id,n,c)}}),Object(p.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[Object(p.jsxs)("div",{className:"image-upload__preview",children:[l&&Object(p.jsx)("img",{src:l,alt:"Preview"}),!l&&Object(p.jsx)("p",{children:"Please pick an image."})]}),Object(p.jsx)(y,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!j&&Object(p.jsx)("p",{children:e.errorText})]})}),M=n(15),U=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var c in e.inputs)e.inputs[c]&&(n=c===t.inputId?n&&t.isValid:n&&e.inputs[c].isValid);return Object(v.a)(Object(v.a)({},e),{},{inputs:Object(v.a)(Object(v.a)({},e.inputs),{},Object(M.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},B=function(e,t){var n=Object(a.useReducer)(U,{inputs:e,isValid:t}),c=Object(b.a)(n,2),r=c[0],s=c[1];return[r,Object(a.useCallback)((function(e,t,n){s({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),Object(a.useCallback)((function(e,t){s({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},H=Object(a.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),z=(n(21),function(){var e=Object(a.useContext)(H),t=k(),n=t.isLoading,c=t.error,r=t.sendRequest,s=t.clearError,i=B({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),o=Object(b.a)(i,2),u=o[0],O=o[1],h=Object(l.g)(),x=function(){var t=Object(j.a)(d.a.mark((function t(n){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,(c=new FormData).append("title",u.inputs.title.value),c.append("description",u.inputs.description.value),c.append("address",u.inputs.address.value),c.append("creator",e.userId),c.append("image",u.inputs.image.value),t.next=10,r("".concat("https://mernplaces.stevenabaco.dev/api","/places"),"POST",c,{Authorization:"Bearer "+e.token});case 10:h.push("/"),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(1);case 15:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{error:c,onClear:s}),Object(p.jsxs)("form",{className:"place-form",onSubmit:x,children:[n&&Object(p.jsx)(w,{asOverlay:!0}),Object(p.jsx)(F,{id:"title",element:"input",type:"text",label:"Title",validators:[D()],errorText:"Please enter a valid title.",onInput:O}),Object(p.jsx)(F,{id:"description",element:"textarea",label:"Description",validators:[L(5)],errorText:"Please enter a valid description (Need at least 5 characters).",onInput:O}),Object(p.jsx)(F,{id:"address",element:"input",label:"Address",validators:[D],errorText:"Please enter a valid address.",onInput:O}),Object(p.jsx)(G,{id:"image",onInput:O,errorText:"Please provide an image."}),Object(p.jsx)(y,{type:"submit",disabled:!u.isValid,children:"ADD PLACE"})]})]})}),q=(n(51),function(e){var t=Object(a.useRef)(),n=e.center,c=e.zoom;return Object(a.useEffect)((function(){var e=new window.google.maps.Map(t.current,{center:n,zoom:c});new window.google.maps.Marker({position:n,map:e})}),[n,c]),Object(p.jsx)("div",{ref:t,className:"map ".concat(e.className),style:e.style})}),J=(n(52),function(e){var t=k(),n=t.isLoading,c=t.error,r=t.sendRequest,s=t.clearError,i=Object(a.useContext)(H),l=Object(a.useState)(!1),o=Object(b.a)(l,2),u=o[0],d=o[1],j=Object(a.useState)(!1),O=Object(b.a)(j,2),x=O[0],m=O[1],v=function(){return d(!1)},f=function(){m(!1)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{error:c,onClear:s}),Object(p.jsx)(N,{show:u,onCancel:v,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:Object(p.jsx)(y,{onClick:v,children:"CLOSE"}),children:Object(p.jsx)("div",{className:"map-container",children:Object(p.jsx)(q,{center:e.coordinates,zoom:16})})}),Object(p.jsx)(N,{show:x,onCancel:f,header:"Are you sure ?",footerClass:"place-item__modal-actions",footer:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{inverse:!0,onClick:f,children:"CANCEL"}),Object(p.jsx)(y,{danger:!0,onClick:function(){m(!1);try{r("".concat("https://mernplaces.stevenabaco.dev/api","/places/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+i.token}),e.onDelete(e.id)}catch(t){}},children:"DELETE"})]}),children:Object(p.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone."})}),Object(p.jsx)("li",{className:"place-item",children:Object(p.jsxs)(h,{className:"place-item__content",children:[n&&Object(p.jsx)(w,{asOverlay:!0}),Object(p.jsx)("div",{className:"place-item__image",children:Object(p.jsx)("img",{src:"".concat("https://mernplaces.stevenabaco.dev/").concat(e.image),alt:e.title})}),Object(p.jsxs)("div",{className:"place-item__info",children:[Object(p.jsx)("h2",{children:e.title}),Object(p.jsx)("h3",{children:e.address}),Object(p.jsx)("p",{children:e.description})]}),Object(p.jsxs)("div",{className:"place-item__actions",children:[Object(p.jsx)(y,{inverse:!0,onClick:function(){return d(!0)},children:"VIEW ON MAP"}),i.userId===e.creatorId&&Object(p.jsx)(y,{to:"/places/".concat(e.id),children:"EDIT"}),i.userId===e.creatorId&&Object(p.jsx)(y,{danger:!0,onClick:function(){m(!0)},children:"DELETE"})]})]})})]})}),W=(n(53),function(e){return 0===e.items.length?Object(p.jsx)("div",{className:"place-list center",children:Object(p.jsxs)(h,{children:[Object(p.jsx)("h2",{children:"No places Found. Do you want to create one?"}),Object(p.jsx)(y,{to:"/places/new",children:"Share a Place"})]})}):Object(p.jsx)("ul",{className:"place-list",children:e.items.map((function(t){return Object(p.jsx)(J,{id:t.id,image:t.image,title:t.title,description:t.description,address:t.address,creatorId:t.creator,coordinates:t.location,onDelete:e.onDeletePlace},t.id)}))})}),X=function(){var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1],r=k(),s=r.isLoading,i=r.error,o=r.sendRequest,u=r.clearError,O=Object(l.h)().userId;Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("".concat("https://mernplaces.stevenabaco.dev/api","/places/user/").concat(O));case 3:t=e.sent,c(t.places),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[o,O]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{error:i,onClear:u}),s&&Object(p.jsx)("div",{className:"center",children:Object(p.jsx)(w,{})}),!s&&n&&Object(p.jsx)(W,{items:n,onDeletePlace:function(e){c((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},Y=function(){var e=Object(a.useContext)(H),t=k(),n=t.isLoading,c=t.error,r=t.sendRequest,s=t.clearError,i=Object(a.useState)(),o=Object(b.a)(i,2),u=o[0],O=o[1],x=Object(l.h)().placeId,m=Object(l.g)(),v=B({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),f=Object(b.a)(v,3),g=f[0],C=f[1],N=f[2];Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("".concat("https://mernplaces.stevenabaco.dev/api","/places/").concat(x));case 3:t=e.sent,O(t.place),N({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[r,x,N]);var E=function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,r("".concat("https://mernplaces.stevenabaco.dev/api","/places/").concat(x),"PATCH",JSON.stringify({title:g.inputs.title.value,description:g.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 4:m.push("/"+e.userId+"/places"),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return n?Object(p.jsx)("div",{className:"center",children:Object(p.jsx)(w,{})}):u||c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{error:c,onClear:s}),!n&&u&&Object(p.jsxs)("form",{className:"place-form",onSubmit:E,children:[Object(p.jsx)(F,{id:"title",element:"input",type:"text",label:"Title",validators:[D()],errorText:"Please enter a valid title.",onInput:C,initialValue:u.title,initialValid:!0}),Object(p.jsx)(F,{id:"description",element:"textarea",label:"Description",validators:[L(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:C,initialValue:u.description,initialValid:!0}),Object(p.jsx)(y,{type:"submit",disabled:!g.isValid,children:"UPDATE PLACE"})]})]}):Object(p.jsx)("div",{className:"center",children:Object(p.jsx)(h,{children:Object(p.jsx)("h2",{children:"Could not find place!"})})})},K=(n(54),function(e){return Object(p.jsx)("header",{className:"main-header",children:e.children})}),Q=(n(55),function(e){var t=Object(a.useContext)(H);return Object(p.jsxs)("ul",{className:"nav-links",children:[Object(p.jsx)("li",{children:Object(p.jsx)(o.c,{to:"/",exact:!0,children:"ALL USERS"})}),t.isLoggedIn&&Object(p.jsx)("li",{children:Object(p.jsx)(o.c,{to:"/".concat(t.userId,"/places"),children:"MY PLACES"})}),t.isLoggedIn&&Object(p.jsx)("li",{children:Object(p.jsx)(o.c,{to:"/places/new",children:"ADD PLACE"})}),!t.isLoggedIn&&Object(p.jsx)("li",{children:Object(p.jsx)(o.c,{to:"/auth",children:"LOGIN"})}),t.isLoggedIn&&Object(p.jsx)("li",{children:Object(p.jsx)("button",{onClick:t.logout,children:"LOGOUT"})})]})}),$=(n(56),function(e){var t=Object(p.jsx)(f.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(p.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return i.a.createPortal(t,document.getElementById("drawer-hook"))}),Z=(n(57),function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],s=n[1],i=function(){s(!1)};return Object(p.jsxs)(r.a.Fragment,{children:[c&&Object(p.jsx)(g,{onClick:i}),Object(p.jsx)($,{show:c,onClick:i,children:Object(p.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(p.jsx)(Q,{})})}),Object(p.jsxs)(K,{children:[Object(p.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){s(!0)},children:[Object(p.jsx)("span",{}),Object(p.jsx)("span",{}),Object(p.jsx)("span",{})]}),Object(p.jsx)("h1",{className:"main-navigation__title",children:Object(p.jsx)(o.b,{to:"/",children:"React Places"})}),Object(p.jsx)("nav",{className:"main-navigation__header-nav",children:Object(p.jsx)(Q,{})})]})]})}),ee=(n(58),function(){var e=Object(a.useContext)(H),t=Object(a.useState)(!0),n=Object(b.a)(t,2),c=n[0],r=n[1],s=k(),i=s.isLoading,l=s.error,o=s.sendRequest,u=s.clearError,O=B({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),x=Object(b.a)(O,3),m=x[0],f=x[1],g=x[2],C=function(){var t=Object(j.a)(d.a.mark((function t(n){var a,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log(m.inputs),!c){t.next=14;break}return t.prev=3,t.next=6,o("".concat("https://mernplaces.stevenabaco.dev/api","/users/login"),"POST",JSON.stringify({email:m.inputs.email.value,password:m.inputs.password.value}),{"Content-Type":"application/json"});case 6:a=t.sent,e.login(a.userId,a.token),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:t.next=28;break;case 14:return t.prev=14,(r=new FormData).append("email",m.inputs.email.value),r.append("name",m.inputs.name.value),r.append("password",m.inputs.password.value),r.append("image",m.inputs.image.value),t.next=22,o("".concat("https://mernplaces.stevenabaco.dev/api","/users/signup"),"POST",r);case 22:s=t.sent,e.login(s.userId,s.token),t.next=28;break;case 26:t.prev=26,t.t1=t.catch(14);case 28:case"end":return t.stop()}}),t,null,[[3,10],[14,26]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(I,{error:l,onClear:u}),Object(p.jsxs)(h,{className:"authentication",children:[i&&Object(p.jsx)(w,{asOverlay:!0}),Object(p.jsx)("h2",{children:"Login Required"}),Object(p.jsx)("hr",{}),Object(p.jsxs)("form",{onSubmit:C,children:[!c&&Object(p.jsx)(F,{element:"input",id:"name",type:"text",label:"Your Name",validators:[D()],onInput:f,errorText:"Please enter a name"}),Object(p.jsx)(F,{id:"email",element:"input",type:"email",label:"Email",validators:[{type:V}],errorText:"Please enter a valid Email address",onInput:f}),!c&&Object(p.jsx)(G,{center:!0,id:"image",onInput:f,errorText:"Pleease provide an image"}),Object(p.jsx)(F,{id:"password",element:"input",type:"password",label:"Password",validators:[L(6)],errorText:"Please enter a valid password, at least 6 characters",onInput:f}),Object(p.jsx)(y,{type:"submit",disabled:!m.isValid,children:c?"LOGIN":"SIGNUP"})]}),Object(p.jsxs)(y,{inverse:!0,onClick:function(){c?g(Object(v.a)(Object(v.a)({},m.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):g(Object(v.a)(Object(v.a)({},m.inputs),{},{name:void 0}),m.inputs.email.isValid&&m.inputs.password.isValid),r((function(e){return!e}))},children:["SWITCH TO ",c?"SIGNUP":"LOGIN"]})]})]})}),te=function(){var e,t=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(),i=Object(b.a)(s,2),l=i[0],o=i[1],u=Object(a.useState)(!1),d=Object(b.a)(u,2),j=d[0],p=d[1],O=Object(a.useCallback)((function(e,t,n){r(t),p(e);var c=n||new Date((new Date).getTime()+36e5);o(c),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:c.toISOString()}))}),[]),h=Object(a.useCallback)((function(){r(null),o(null),p(null),localStorage.removeItem("userData")}),[]);return Object(a.useEffect)((function(){if(n&&l){var e=l.getTime()-(new Date).getTime();c=setTimeout(h,e)}else clearTimeout(c)}),[n,h,l]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&O(e.userId,e.token)}),[O]),{token:n,login:O,logout:h,userId:j}}(),n=t.token,r=t.login,s=t.logout,i=t.userId;return e=n?Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/",exact:!0,children:Object(p.jsx)(E,{})}),Object(p.jsx)(l.b,{path:"/:userId/places",exact:!0,children:Object(p.jsx)(X,{})}),Object(p.jsx)(l.b,{path:"/places/new",exact:!0,children:Object(p.jsx)(z,{})}),Object(p.jsx)(l.b,{path:"/places/:placeId",children:Object(p.jsx)(Y,{})}),Object(p.jsx)(l.a,{to:"/"})]}):Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{exact:!0,path:"/",children:Object(p.jsx)(E,{})}),Object(p.jsx)(l.b,{exact:!0,path:"/:userId/places",children:Object(p.jsx)(X,{})}),Object(p.jsx)(l.b,{path:"/auth",children:Object(p.jsx)(ee,{})}),Object(p.jsx)(l.a,{to:"/auth"})]}),Object(p.jsx)(H.Provider,{value:{isLoggedIn:!!n,token:n,userId:i,login:r,logout:s},children:Object(p.jsxs)(o.a,{children:[Object(p.jsx)(Z,{}),Object(p.jsx)("main",{children:Object(p.jsx)(l.d,{children:e})})]})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(te,{})}),document.getElementById("root")),ne()}]),[[59,1,2]]]);
//# sourceMappingURL=main.d82261a8.chunk.js.map